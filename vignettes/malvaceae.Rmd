---
title: "Physcraper Examples: the Malvaceae"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{ilex}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
knitr::opts_knit$set(
  global.par = TRUE
  )
```

```{r setup, echo=FALSE}
library(webshot)
```

```{r nature, echo=FALSE, fig.cap="Cocoa plant fruits", out.width = '50%', fig.retina= 2}
knitr::include_graphics("malvaceae-plant.jpg")
```

## I. Finding a tree to update

### With the Open Tree of Life website

Go to the [Open Tree of Life website](https://tree.opentreeoflife.org/opentree/argus/opentree12.3@ott93302) and use the "search for taxon" menu to look up the taxon **Malvaceae**.

This is how the genus **Malvaceae** is represented on the Open Tree of Life synthetic tree at the middle of year 2020:

```{r tree-opentree, echo=FALSE, fig.cap="See this live on the website at <https://tree.opentreeoflife.org/opentree/argus/ottol@279960/Malvaceae>", out.width = '100%', fig.retina= 3}
webshot::webshot("https://tree.opentreeoflife.org/opentree/argus/ottol@279960/Malvaceae", file = "malvaceae-tree-opentree.png", delay = 1.5, zoom = 1, vwidth = 1400, vheight=1200)
```

***

Navigating into the tree, we notice that there might be some studies associated to this portion of the Open Tree synthetic tree.

```{r tree-opentree-2, echo=FALSE, fig.cap="", out.width = '100%', fig.retina= 2}

knitr::include_graphics("malvaceae-plant.jpg")
```

***

Let's verify that on the [study curator of OToL](https://tree.opentreeoflife.org/curator).

Studies matching the word 'malvaceae' on the curator database, at the middle of year 2020. Some of these studies are not actually about the Malvaceae, but other taxa that have the species epithet *malvaceae*.

```{r curation-opentree, echo=FALSE, fig.cap="", out.width = '100%', fig.retina= 2}
knitr::include_graphics("malvaceae-plant.jpg")
```

### Finding a tree to update using the R package rotl

<!-- ```{r} -->
<!-- ilex <- rotl::tnrs_match_names(names = "ilex") -->
<!-- ``` -->

<!-- ```{r, results='asis', echo=FALSE} -->
<!-- knitr::kable(ilex, caption = "Taxonomic Name Resolution information for the genus *Ilex*") -->
<!-- ``` -->

<!-- Can we use the *OTT id* to get some trees or studies? -->

<!-- ```{r} -->
<!-- rotl::studies_properties() -->
<!-- ``` -->

Explain what a focal clade is.

There is a handy function that will search a taxon among the focal clades reported across trees.

```{r}
studies <- rotl::studies_find_studies(property="ot:focalCladeOTTTaxonName", value="Malvaceae")
```

```{r, results='asis', echo=FALSE}
knitr::kable(studies, caption = "Studies with the genus *Malvaceae* as focal clade.")
```
